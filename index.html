<!DOCTYPE html>
<html>
<head>
	<title>SketchApp</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
</head>
<body>
<input type="number" name="inputThickness" id="inputThickness"/>
<input type="color" name="inputColor" id="inputColor"/>
<input type="submit" name="inputSubmit" id="inputSubmit">

<canvas id="drawCanvas"></canvas>

<script>

	function getSettings(){
		var ctx = c.getContext("2d");
		console.log();
		ctx.strokeStyle = $('#inputColor').val();
		ctx.lineWidth = $('#inputThickness').val();
	}

	function resizeCanvas(){
		var c = document.getElementById("drawCanvas");
		c.width = $('#drawCanvas').width();
		c.height = $('#drawCanvas').height();
	}

	function keepDraw(){
		if (drawing == true){
			path=[event.offsetX,event.offsetY];
			paths.push(path);
			var ctx = c.getContext("2d");
			ctx.beginPath();
			ctx.moveTo(lastX,lastY);
			ctx.lineTo(event.offsetX,event.offsetY);
			ctx.stroke();
			lastX = event.offsetX;
			lastY = event.offsetY;
		}
	}

	function startDraw(){
		drawing = true;
		lastX = event.offsetX;
		lastY = event.offsetY;
		return drawing;
	}
	function sendPaths(){
		parameters = {
			url:'http://draw.api.niamor.com/paths/add',
			method:'post',
			data: paths 
		};
		$.ajax(parameters).done();
	}
	function stopDraw(){
		drawing = false;
		sendPaths();
		return drawing;
	}


	path=[];
	paths=[];
	lastX = 0;
	lastY = 0;
	drawing = false;
	
	$('#drawCanvas').on("mousedown" , startDraw);
	$('#drawCanvas').on("mouseup", stopDraw);
	$('#drawCanvas').on("mousemove",keepDraw);
	$(window).resize(resizeCanvas);

	$('#inputSubmit').on("click" , getSettings);

	var c = document.getElementById("drawCanvas");
	c.width = $('#drawCanvas').width();
	c.height = $('#drawCanvas').height();
	
</script>

</body>
</html>